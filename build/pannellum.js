window.pannellum=function(e,t){'use strict';function n(n,o){function a(){var n=t.createElement('div');if(n.innerHTML='<!--[if lte IE 9]><i></i><![endif]-->',1==n.getElementsByTagName('i').length)return void l();ge=ce.hfov,we=ce.pitch;var o,d;if('cubemap'==ce.type){for(ye=[],o=0;6>o;o++)ye.push(new Image),ye[o].crossOrigin=ce.crossOrigin;st.load.lbox.style.display='block',st.load.lbar.style.display='none'}else if('multires'==ce.type){var a=JSON.parse(JSON.stringify(ce.multiRes));ce.basePath&&ce.multiRes.basePath&&!/^(?:[a-z]+:)?\/\//i.test(ce.multiRes.basePath)?a.basePath=ce.basePath+ce.multiRes.basePath:ce.multiRes.basePath?a.basePath=ce.multiRes.basePath:ce.basePath&&(a.basePath=ce.basePath),ye=a}else if(!0===ce.dynamic)ye=ce.panorama;else{if(void 0===ce.panorama)return void l(ce.strings.noPanoramaError);ye=new Image}if('cubemap'==ce.type){var c=6,h=function(){c--,0===c&&r()},m=function(n){var e=t.createElement('a');e.href=n.target.src,e.textContent=e.href,l(ce.strings.fileAccessError.replace('%s',e.outerHTML))};for(o=0;o<ye.length;o++)d=ce.cubeMap[o],'null'==d?(console.log('Will use background instead of missing cubemap face '+o),h()):(ce.basePath&&!s(d)&&(d=ce.basePath+d),ye[o].onload=h,ye[o].onerror=m,ye[o].src=se(d))}else if('multires'==ce.type)r();else if(d='',ce.basePath&&(d=ce.basePath),!0!==ce.dynamic){if(ce.panorama instanceof Image||ce.panorama instanceof ImageData||ce.panorama instanceof ImageBitmap)return ye=ce.panorama,void r();d=s(ce.panorama)?ce.panorama:d+ce.panorama,ye.onload=function(){e.URL.revokeObjectURL(this.src),r()};var u=new XMLHttpRequest;u.onloadend=function(){if(200!=u.status){var e=t.createElement('a');e.href=d,e.textContent=e.href,l(ce.strings.fileAccessError.replace('%s',e.outerHTML))}var n=this.response;i(n,d),st.load.msg.innerHTML=''},u.onprogress=function(t){if(t.lengthComputable){var e=100*(t.loaded/t.total);st.load.lbarFill.style.width=e+'%';var n,o,a;1e6<t.total?(n='MB',o=(t.loaded/1e6).toFixed(2),a=(t.total/1e6).toFixed(2)):1e3<t.total?(n='kB',o=(t.loaded/1e3).toFixed(1),a=(t.total/1e3).toFixed(1)):(n='B',o=t.loaded,a=t.total),st.load.msg.innerHTML=o+' / '+a+' '+n}else st.load.lbox.style.display='block',st.load.lbar.style.display='none'};try{u.open('GET',d,!0)}catch(t){l(ce.strings.malformedURLError)}u.responseType='blob',u.setRequestHeader('Accept','image/*,*/*;q=0.9'),u.withCredentials='use-credentials'===ce.crossOrigin,u.send()}ce.draggable&&nt.classList.add('pnlm-grab'),nt.classList.remove('pnlm-grabbing'),Je=!0===ce.dynamicUpdate,ce.dynamic&&Je&&(ye=ce.panorama,r())}function s(e){return /^(?:[a-z]+:)?\/\//i.test(e)||'/'==e[0]||'blob:'==e.slice(0,5)}function r(){pe||(pe=new libpannellum.renderer(ot)),Ue||(Ue=!0,at.addEventListener('mousedown',h,!1),t.addEventListener('mousemove',y,!1),t.addEventListener('mouseup',f,!1),ce.mouseZoom&&(nt.addEventListener('mousewheel',E,!1),nt.addEventListener('DOMMouseScroll',E,!1)),ce.doubleClickZoom&&at.addEventListener('dblclick',m,!1),n.addEventListener('mozfullscreenchange',_,!1),n.addEventListener('webkitfullscreenchange',_,!1),n.addEventListener('msfullscreenchange',_,!1),n.addEventListener('fullscreenchange',_,!1),'function'==typeof ResizeObserver?(be=new ResizeObserver(z),be.observe(n)):(e.addEventListener('resize',z,!1),e.addEventListener('orientationchange',z,!1)),!ce.disableKeyboardCtrl&&(n.addEventListener('keydown',L,!1),n.addEventListener('keyup',C,!1),n.addEventListener('blur',k,!1)),t.addEventListener('mouseleave',f,!1),''===t.documentElement.style.pointerAction&&''===t.documentElement.style.touchAction?(at.addEventListener('pointerdown',b,!1),at.addEventListener('pointermove',x,!1),at.addEventListener('pointerup',P,!1),at.addEventListener('pointerleave',P,!1)):(at.addEventListener('touchstart',v,!1),at.addEventListener('touchmove',g,!1),at.addEventListener('touchend',w,!1)),e.navigator.pointerEnabled&&(n.style.touchAction='none')),M(),$(ce.hfov),setTimeout(function(){},500)}function i(n,o){var a=new FileReader;a.addEventListener('loadend',function(){var i=a.result;if(navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 8_/)){var s=i.indexOf('\xFF\xC2');(0>s||65536<s)&&l(ce.strings.iOS8WebGLError)}var r=i.indexOf('<x:xmpmeta');if(-1<r&&!0!==ce.ignoreGPanoXMP){var d=i.substring(r,i.indexOf('</x:xmpmeta>')+12),c=function(e){var t;return 0<=d.indexOf(e+'="')?(t=d.substring(d.indexOf(e+'="')+e.length+2),t=t.substring(0,t.indexOf('"'))):0<=d.indexOf(e+'>')&&(t=d.substring(d.indexOf(e+'>')+e.length+1),t=t.substring(0,t.indexOf('<'))),void 0===t?null:+t},p={fullWidth:c('GPano:FullPanoWidthPixels'),croppedWidth:c('GPano:CroppedAreaImageWidthPixels'),fullHeight:c('GPano:FullPanoHeightPixels'),croppedHeight:c('GPano:CroppedAreaImageHeightPixels'),topPixels:c('GPano:CroppedAreaTopPixels'),heading:c('GPano:PoseHeadingDegrees'),horizonPitch:c('GPano:PosePitchDegrees'),horizonRoll:c('GPano:PoseRollDegrees')};null!==p.fullWidth&&null!==p.croppedWidth&&null!==p.fullHeight&&null!==p.croppedHeight&&null!==p.topPixels&&(0>Ve.indexOf('haov')&&(ce.haov=360*(p.croppedWidth/p.fullWidth)),0>Ve.indexOf('vaov')&&(ce.vaov=180*(p.croppedHeight/p.fullHeight)),0>Ve.indexOf('vOffset')&&(ce.vOffset=-180*((p.topPixels+p.croppedHeight/2)/p.fullHeight-.5)),null!==p.heading&&0>Ve.indexOf('northOffset')&&(ce.northOffset=p.heading,!1!==ce.compass&&(ce.compass=!0)),null!==p.horizonPitch&&null!==p.horizonRoll&&(0>Ve.indexOf('horizonPitch')&&(ce.horizonPitch=p.horizonPitch),0>Ve.indexOf('horizonRoll')&&(ce.horizonRoll=p.horizonRoll)))}ye.src=e.URL.createObjectURL(n),ye.onerror=function(){(function(){return e.fetch?e.fetch(t.location.href).then(function(e){return e.headers.get('Content-Security-Policy')}):null})().then(function(e){if(e){var t=e.split(';').find(function(e){var t=e.match(/img-src(.*)/);if(t)return!t[1].includes('blob')});t&&(console.log('CSP blocks blobs; reverting to URL.'),ye.crossOrigin=ce.crossOrigin,ye.src=o)}})}}),a.readAsBinaryString===void 0?a.readAsText(n):a.readAsBinaryString(n)}function l(e){e===void 0&&(e=ce.strings.genericWebGLError),st.errorMsg.innerHTML='<p>'+e+'</p>',lt.load.style.display='none',st.load.box.style.display='none',st.errorMsg.style.display='table',Be=!0,ue=void 0,ot.style.display='none',de('error',e)}function d(){Be&&(st.load.box.style.display='none',st.errorMsg.style.display='none',Be=!1,ot.style.display='block',de('errorcleared'))}function c(e){var t=p(e);it.style.left=t.x+'px',it.style.top=t.y+'px',clearTimeout(c.t1),clearTimeout(c.t2),it.style.display='block',it.style.opacity=1,c.t1=setTimeout(function(){it.style.opacity=0},2e3),c.t2=setTimeout(function(){it.style.display='none'},2500),e.preventDefault()}function p(e){var t=n.getBoundingClientRect(),o={};return o.x=(e.clientX||e.pageX)-t.left,o.y=(e.clientY||e.pageY)-t.top,o}function h(e){if(e.preventDefault(),n.focus(),ue&&ce.draggable&&!ce.draggingHotSpot){var t=p(e);if(ce.hotSpotDebug){var o=u(e);console.log('Pitch: '+o[0]+', Yaw: '+o[1]+', Center Pitch: '+ce.pitch+', Center Yaw: '+ce.yaw+', HFOV: '+ce.hfov)}ee(),oe(),ce.roll=0,Ge.hfov=0,Fe=!0,Te=Date.now(),Ae=t.x,Ie=t.y,De=ce.yaw,Me=ce.pitch,nt.classList.add('pnlm-grabbing'),nt.classList.remove('pnlm-grab'),de('mousedown',e),S()}}function m(e){if(ce.minHfov===ce.hfov)Se.setHfov(ge,1e3);else{var t=u(e);Se.lookAt(t[0],t[1],ce.minHfov,1e3)}}function u(e){var t=p(e),n=pe.getCanvas(),o=n.clientWidth,i=n.clientHeight,r=2*(t.x/o)-1,l=(1-2*(t.y/i))*i/o,d=1/Oe(ce.hfov*ze/360),h=Re(ce.pitch*ze/180),s=He(ce.pitch*ze/180),c=d*s-l*h,a=Ce(r*r+c*c),m=180*ke((l*s+d*h)/a)/ze,u=180*Le(r/a,c/a)/ze+ce.yaw;return-180>u&&(u+=360),180<u&&(u-=360),[m,u]}function y(e){if(me)B(me,e);else if(Fe&&ue){Te=Date.now();var t=pe.getCanvas(),n=t.clientWidth,o=t.clientHeight,a=p(e),i=180*(ke(2*(Ae/n)-1)-ke(2*(a.x/n)-1))/ze*ce.hfov/90+De;Ge.yaw=.2*((i-ce.yaw)%360),ce.yaw=i;var s=180*(2*ke(Oe(ce.hfov/360*ze)*o/n))/ze,r=180*(ke(2*(a.y/o)-1)-ke(2*(Ie/o)-1))/ze*s/90+Me;Ge.pitch=.2*(r-ce.pitch),ce.pitch=r}}function f(e){me&&me.dragHandlerFunc&&me.dragHandlerFunc(e,me.dragHandlerArgs),me=null;Fe&&(Fe=!1,15<Date.now()-Te&&(Ge.pitch=Ge.yaw=0),nt.classList.add('pnlm-grab'),nt.classList.remove('pnlm-grabbing'),Te=Date.now(),de('mouseup',e))}function v(e){if(ue&&ce.draggable&&!me){ee(),oe(),ce.roll=0,Ge.hfov=0;var t=p(e.targetTouches[0]);if(Ae=t.x,Ie=t.y,2==e.targetTouches.length){var n=p(e.targetTouches[1]);Ae+=.5*(n.x-t.x),Ie+=.5*(n.y-t.y),Ne=Ce((t.x-n.x)*(t.x-n.x)+(t.y-n.y)*(t.y-n.y))}Fe=!0,Te=Date.now(),De=ce.yaw,Me=ce.pitch,de('touchstart',e),S()}}function g(e){if(ce.draggable&&(e.preventDefault(),ue&&(Te=Date.now()),Fe&&ue)){var t=p(e.targetTouches[0]),n=t.x,o=t.y;if(2==e.targetTouches.length&&-1!=Ne){var a=p(e.targetTouches[1]);n+=.5*(a.x-t.x),o+=.5*(a.y-t.y);var i=Ce((t.x-a.x)*(t.x-a.x)+(t.y-a.y)*(t.y-a.y));$(ce.hfov+.1*(Ne-i)),Ne=i}var s=ce.hfov/360*ce.touchPanSpeedCoeffFactor,r=(Ae-n)*s+De;Ge.yaw=.2*((r-ce.yaw)%360),ce.yaw=r;var l=(o-Ie)*s+Me;Ge.pitch=.2*(l-ce.pitch),ce.pitch=l}}function w(){me=null,Fe=!1,150<Date.now()-Te&&(Ge.pitch=Ge.yaw=0),Ne=-1,Te=Date.now(),de('touchend',event)}function b(e){if('touch'==e.pointerType){if(!ue||!ce.draggable)return;pt.push(e.pointerId),ht.push({clientX:e.clientX,clientY:e.clientY}),e.targetTouches=ht,v(e),e.preventDefault()}}function x(e){if('touch'==e.pointerType){if(me)return void B(me,e);if(!ce.draggable)return;for(var t=0;t<pt.length;t++)if(e.pointerId==pt[t])return ht[t].clientX=e.clientX,ht[t].clientY=e.clientY,e.targetTouches=ht,g(e),void e.preventDefault()}}function P(e){if(me&&me.dragHandlerFunc&&me.dragHandlerFunc(e,me.dragHandlerArgs),me=null,'touch'==e.pointerType){for(var t=!1,n=0;n<pt.length;n++)e.pointerId==pt[n]&&(pt[n]=void 0),pt[n]&&(t=!0);t||(pt=[],ht=[],w()),e.preventDefault()}}function E(e){ue&&('fullscreenonly'!=ce.mouseZoom||We)&&(e.preventDefault(),ee(),Te=Date.now(),e.wheelDeltaY?($(ce.hfov-.05*e.wheelDeltaY),Ge.hfov=0>e.wheelDelta?1:-1):e.wheelDelta?($(ce.hfov-.05*e.wheelDelta),Ge.hfov=0>e.wheelDelta?1:-1):e.detail&&($(ce.hfov+1.5*e.detail),Ge.hfov=0<e.detail?1:-1),S())}function L(e){ee(),Te=Date.now(),oe(),ce.roll=0;var t=e.which||e.keycode;0>ce.capturedKeyNumbers.indexOf(t)||(e.preventDefault(),27==t?We&&K():H(t,!0))}function k(){for(var e=0;10>e;e++)Ye[e]=!1}function C(e){var t=e.which||e.keycode;0>ce.capturedKeyNumbers.indexOf(t)||(e.preventDefault(),H(t,!1))}function H(e,t){var n=!1;109===e||189===e||17===e||173===e?(Ye[0]!=t&&(n=!0),Ye[0]=t):107===e||187===e||16===e||61===e?(Ye[1]!=t&&(n=!0),Ye[1]=t):38===e?(Ye[2]!=t&&(n=!0),Ye[2]=t):87===e?(Ye[6]!=t&&(n=!0),Ye[6]=t):40===e?(Ye[3]!=t&&(n=!0),Ye[3]=t):83===e?(Ye[7]!=t&&(n=!0),Ye[7]=t):37===e?(Ye[4]!=t&&(n=!0),Ye[4]=t):65===e?(Ye[8]!=t&&(n=!0),Ye[8]=t):39===e?(Ye[5]!=t&&(n=!0),Ye[5]=t):68===e?(Ye[9]!=t&&(n=!0),Ye[9]=t):void 0;n&&t&&(fe='undefined'!=typeof performance&&performance.now()?performance.now():Date.now(),S())}function R(){if(ue){var e,t=!1,n=ce.pitch,o=ce.yaw,a=ce.hfov;e='undefined'!=typeof performance&&performance.now()?performance.now():Date.now(),void 0===fe&&(fe=e);var i=(e-fe)*ce.hfov/1700;if(i=Ee(i,1),Ye[0]&&!0===ce.keyboardZoom&&($(ce.hfov+(.8*Ge.hfov+.5)*i),t=!0),Ye[1]&&!0===ce.keyboardZoom&&($(ce.hfov+(.8*Ge.hfov-.2)*i),t=!0),(Ye[2]||Ye[6])&&(ce.pitch+=(.8*Ge.pitch+.2)*i,t=!0),(Ye[3]||Ye[7])&&(ce.pitch+=(.8*Ge.pitch-.2)*i,t=!0),(Ye[4]||Ye[8])&&(ce.yaw+=(.8*Ge.yaw-.2)*i,t=!0),(Ye[5]||Ye[9])&&(ce.yaw+=(.8*Ge.yaw+.2)*i,t=!0),t&&(Te=Date.now()),ce.autoRotate){if(.001<e-fe){var s=(e-fe)/1e3,r=(Ge.yaw/s*i-.2*ce.autoRotate)*s;r=(0<-ce.autoRotate?1:-1)*Ee(Pe(ce.autoRotate*s),Pe(r)),ce.yaw+=r}ce.autoRotateStopDelay&&(ce.autoRotateStopDelay-=e-fe,0>=ce.autoRotateStopDelay&&(ce.autoRotateStopDelay=!1,Xe=ce.autoRotate,ce.autoRotate=0))}if(Ke.pitch&&(O('pitch'),n=ce.pitch),Ke.yaw&&(O('yaw'),o=ce.yaw),Ke.hfov&&(O('hfov'),a=ce.hfov),0<i&&!ce.autoRotate){var l=1-ce.friction;Ye[4]||Ye[5]||Ye[8]||Ye[9]||Ke.yaw||(ce.yaw+=Ge.yaw*i*l),Ye[2]||Ye[3]||Ye[6]||Ye[7]||Ke.pitch||(ce.pitch+=Ge.pitch*i*l),Ye[0]||Ye[1]||Ke.hfov||$(ce.hfov+Ge.hfov*i*l)}if(fe=e,0<i){Ge.yaw=.8*Ge.yaw+.2*((ce.yaw-o)/i),Ge.pitch=.8*Ge.pitch+.2*((ce.pitch-n)/i),Ge.hfov=.8*Ge.hfov+.2*((ce.hfov-a)/i);var d=ce.autoRotate?Pe(ce.autoRotate):5;Ge.yaw=Ee(d,xe(Ge.yaw,-d)),Ge.pitch=Ee(d,xe(Ge.pitch,-d)),Ge.hfov=Ee(d,xe(Ge.hfov,-d))}Ye[0]&&Ye[1]&&(Ge.hfov=0),(Ye[2]||Ye[6])&&(Ye[3]||Ye[7])&&(Ge.pitch=0),(Ye[4]||Ye[8])&&(Ye[5]||Ye[9])&&(Ge.yaw=0)}}function O(e){var n=Ke[e],t=Ee(1,xe((Date.now()-n.startTime)/1e3/(n.duration/1e3),0)),o=n.startPosition+ce.animationTimingFunction(t)*(n.endPosition-n.startPosition);(n.endPosition>n.startPosition&&o>=n.endPosition||n.endPosition<n.startPosition&&o<=n.endPosition||n.endPosition===n.startPosition)&&(o=n.endPosition,Ge[e]=0,delete Ke[e]),ce[e]=o}function z(){_('resize')}function S(){qe||(qe=!0,F())}function F(){if(!et)if(T(),ve&&clearTimeout(ve),Fe||!0===je)requestAnimationFrame(F);else if(Ye[0]||Ye[1]||Ye[2]||Ye[3]||Ye[4]||Ye[5]||Ye[6]||Ye[7]||Ye[8]||Ye[9]||ce.autoRotate||Ke.pitch||Ke.yaw||Ke.hfov||.01<Pe(Ge.yaw)||.01<Pe(Ge.pitch)||.01<Pe(Ge.hfov))R(),0<=ce.autoRotateInactivityDelay&&Xe&&Date.now()-Te>ce.autoRotateInactivityDelay&&!ce.autoRotate&&(ce.autoRotate=Xe,Se.lookAt(we,void 0,ge,3e3)),requestAnimationFrame(F);else if(pe&&(pe.isLoading()||!0===ce.dynamic&&Je))requestAnimationFrame(F);else{Se.getPitch&&Se.getYaw&&Se.getHfov&&de('animatefinished',{pitch:Se.getPitch(),yaw:Se.getYaw(),hfov:Se.getHfov()}),qe=!1,fe=void 0;var e=ce.autoRotateInactivityDelay-(Date.now()-Te);0<e?ve=setTimeout(function(){ce.autoRotate=Xe,Se.lookAt(we,void 0,ge,3e3),S()},e):0<=ce.autoRotateInactivityDelay&&Xe&&(ce.autoRotate=Xe,Se.lookAt(we,void 0,ge,3e3),S())}}function T(){var e;if(ue){var t=pe.getCanvas();!1!==ce.autoRotate&&(360<ce.yaw?ce.yaw-=360:-360>ce.yaw&&(ce.yaw+=360)),e=ce.yaw;var n=0,o=0;if(ce.avoidShowingBackground){var a=ce.hfov/2,i=180*Le(Oe(a/180*ze),t.width/t.height)/ze,s=ce.vaov>ce.haov;s?o=i*(1-Ee(He((ce.pitch-a)/180*ze),He((ce.pitch+a)/180*ze))):n=a*(1-Ee(He((ce.pitch-i)/180*ze),He((ce.pitch+i)/180*ze)))}var r=ce.maxYaw-ce.minYaw,l=-180,d=180;360>r&&(l=ce.minYaw+ce.hfov/2+n,d=ce.maxYaw-ce.hfov/2-n,r<ce.hfov&&(l=d=(l+d)/2),ce.yaw=xe(l,Ee(d,ce.yaw))),!1!==ce.autoRotate||(360<ce.yaw?ce.yaw-=360:-360>ce.yaw&&(ce.yaw+=360)),!1!==ce.autoRotate&&e!=ce.yaw&&fe!==void 0&&(ce.autoRotate*=-1);var c=180*(2*ke(Oe(.5*(ce.hfov/180*ze))/(t.width/t.height))/ze),p=ce.minPitch+c/2,h=ce.maxPitch-c/2,m=ce.maxPitch-ce.minPitch;m<c&&(p=h=(p+h)/2),isNaN(p)&&(p=-90),isNaN(h)&&(h=90),ce.pitch=xe(p,Ee(h,ce.pitch)),pe.render(ce.pitch*ze/180,ce.yaw*ze/180,ce.hfov*ze/180,{roll:ce.roll*ze/180}),j(),ce.compass&&(ct.style.transform='rotate('+(-ce.yaw-ce.northOffset)+'deg)',ct.style.webkitTransform='rotate('+(-ce.yaw-ce.northOffset)+'deg)')}}function A(e,t,n,o){this.w=e,this.x=t,this.y=n,this.z=o}function I(e,t,n){var o=[t?t*ze/180/2:0,n?n*ze/180/2:0,e?e*ze/180/2:0],a=[He(o[0]),He(o[1]),He(o[2])],i=[Re(o[0]),Re(o[1]),Re(o[2])];return new A(a[0]*a[1]*a[2]-i[0]*i[1]*i[2],i[0]*a[1]*a[2]-a[0]*i[1]*i[2],a[0]*i[1]*a[2]+i[0]*a[1]*i[2],a[0]*a[1]*i[2]+i[0]*i[1]*a[2])}function N(t,n,o){var a=I(t,n,o);a=a.multiply(new A(0.7071067811865476,-0.7071067811865476,0,0));var i=e.orientation?-e.orientation*ze/180/2:0;return a.multiply(new A(He(i),0,-Re(i),0))}function D(t){var e=N(t.alpha,t.beta,t.gamma).toEulerAngles();'number'==typeof je&&10>je?je+=1:10===je?(Ze=180*(e[2]/ze)+ce.yaw,je=!0,requestAnimationFrame(F)):(ce.pitch=180*(e[0]/ze),ce.roll=180*(-e[1]/ze),ce.yaw=180*(-e[2]/ze)+Ze)}function M(){try{var e={};ce.horizonPitch!==void 0&&(e.horizonPitch=ce.horizonPitch*ze/180),ce.horizonRoll!==void 0&&(e.horizonRoll=ce.horizonRoll*ze/180),ce.backgroundColor!==void 0&&(e.backgroundColor=ce.backgroundColor),pe.init(ye,ce.type,ce.dynamic,ce.haov*ze/180,ce.vaov*ze/180,ce.vOffset*ze/180,Y,e),!0!==ce.dynamic&&(ye=void 0)}catch(e){if('webgl error'==e.type||'no webgl'==e.type)l();else if('webgl size error'==e.type)l(ce.strings.textureSizeError.replace('%s',e.width).replace('%s',e.maxWidth));else throw l(ce.strings.unknownError),e}}function Y(){if(ce.sceneFadeDuration&&pe.fadeImg!==void 0){pe.fadeImg.style.opacity=0;var e=pe.fadeImg;delete pe.fadeImg,setTimeout(function(){ot.removeChild(e),de('scenechangefadedone')},ce.sceneFadeDuration)}ct.style.display=ce.compass?'inline':'none',U(),st.load.box.style.display='none',he!==void 0&&(ot.removeChild(he),he=void 0),ue=!0,S(),de('load')}function W(n){n.pitch=+n.pitch||0,n.yaw=+n.yaw||0;var e=t.createElement('div');e.className='pnlm-hotspot-base',e.className+=n.cssClass?' '+n.cssClass:' pnlm-hotspot pnlm-sprite pnlm-'+ie(n.type);var o=t.createElement('span');n.text&&(o.innerHTML=ie(n.text));var i;if(n.video){var r=t.createElement('video'),l=n.video;ce.basePath&&!s(l)&&(l=ce.basePath+l),r.src=se(l),r.controls=!0,r.style.width=n.width+'px',ot.appendChild(e),o.appendChild(r)}else if(n.image){var d=n.image;ce.basePath&&!s(d)&&(d=ce.basePath+d),i=t.createElement('a'),i.href=se(n.URL?n.URL:d,!0),i.target='_blank',o.appendChild(i);var c=t.createElement('img');c.src=se(d),c.style.width=n.width+'px',c.style.paddingTop='5px',ot.appendChild(e),i.appendChild(c),o.style.maxWidth='initial'}else if(n.URL){if(i=t.createElement('a'),i.href=se(n.URL,!0),n.attributes)for(var p in n.attributes)i.setAttribute(p,n.attributes[p]);else i.target='_blank';ot.appendChild(i),e.className+=' pnlm-pointer',o.className+=' pnlm-pointer',i.appendChild(e)}else n.sceneId&&(e.onclick=e.ontouchend=function(){return e.clicked||(e.clicked=!0,ne(n.sceneId,n.targetPitch,n.targetYaw,n.targetHfov)),!1},e.className+=' pnlm-pointer',o.className+=' pnlm-pointer'),ot.appendChild(e);n.createTooltipFunc?n.createTooltipFunc(e,n.createTooltipArgs):(n.text||n.video||n.image)&&(e.classList.add('pnlm-tooltip'),e.appendChild(o),o.style.width=o.scrollWidth-20+'px',o.style.marginLeft=-(o.scrollWidth-e.offsetWidth)/2+'px',o.style.marginTop=-o.scrollHeight-12+'px'),n.clickHandlerFunc&&(e.addEventListener('click',function(t){n.clickHandlerFunc(t,n.clickHandlerArgs)},'false'),''===t.documentElement.style.pointerAction&&''===t.documentElement.style.touchAction?e.addEventListener('pointerup',function(t){n.clickHandlerFunc(t,n.clickHandlerArgs)},!1):e.addEventListener('touchend',function(t){n.clickHandlerFunc(t,n.clickHandlerArgs)},!1),e.className+=' pnlm-pointer',o.className+=' pnlm-pointer'),n.draggable&&(e.addEventListener('mousedown',function(t){n.dragHandlerFunc&&n.dragHandlerFunc(t,n.dragHandlerArgs),me=n}),''===t.documentElement.style.pointerAction&&''===t.documentElement.style.touchAction&&e.addEventListener('pointerdown',function(t){n.dragHandlerFunc&&n.dragHandlerFunc(t,n.dragHandlerArgs),me=n}),e.addEventListener('touchmove',function(t){B(n,t.targetTouches[0])}),e.addEventListener('touchend',function(t){n.dragHandlerFunc&&n.dragHandlerFunc(t,n.dragHandlerArgs),me=null})),n.div=e}function B(e,t){var n=u(t);e.pitch=n[0],e.yaw=n[1],q(e)}function U(){$e||(ce.hotSpots?(ce.hotSpots=ce.hotSpots.sort(function(e,t){return e.pitch<t.pitch}),ce.hotSpots.forEach(W)):ce.hotSpots=[],$e=!0,j())}function G(){var e=ce.hotSpots;if($e=!1,delete ce.hotSpots,e)for(var t,n=0;n<e.length;n++){if(t=e[n].div,t){for(;t.parentNode&&t.parentNode!=ot;)t=t.parentNode;ot.removeChild(t)}delete e[n].div}}function q(e){var t=Re(e.pitch*ze/180),n=He(e.pitch*ze/180),o=Re(ce.pitch*ze/180),a=He(ce.pitch*ze/180),i=He((-e.yaw+ce.yaw)*ze/180),s=t*o+n*i*a;if(90>=e.yaw&&-90<e.yaw&&0>=s||(90<e.yaw||-90>=e.yaw)&&0>=s)e.div.style.visibility='hidden';else{var r=Re((-e.yaw+ce.yaw)*ze/180),l=Oe(ce.hfov*ze/360);e.div.style.visibility='visible';var d=pe.getCanvas(),c=d.clientWidth,p=d.clientHeight,h=[-c/l*r*n/s/2,-c/l*(t*a-n*i*o)/s/2],m=Re(ce.roll*ze/180),u=He(ce.roll*ze/180);h=[h[0]*u-h[1]*m,h[0]*m+h[1]*u],h[0]+=(c-e.div.offsetWidth)/2,h[1]+=(p-e.div.offsetHeight)/2;var y='translate('+h[0]+'px, '+h[1]+'px) translateZ(9999px) rotate('+ce.roll+'deg)';e.scale&&(y+=' scale('+ge/ce.hfov/s+')'),e.div.style.webkitTransform=y,e.div.style.MozTransform=y,e.div.style.transform=y}}function j(){ce.hotSpots.forEach(q)}function Z(e){ce={};var t,n,a=['haov','vaov','vOffset','northOffset','horizonPitch','horizonRoll'];for(t in Ve=[],tt)tt.hasOwnProperty(t)&&(ce[t]=tt[t]);for(t in o.default)if(o.default.hasOwnProperty(t))if('strings'==t)for(n in o.default.strings)o.default.strings.hasOwnProperty(n)&&(ce.strings[n]=ie(o.default.strings[n]));else ce[t]=o.default[t],0<=a.indexOf(t)&&Ve.push(t);if(null!==e&&''!==e&&o.scenes&&o.scenes[e]){var i=o.scenes[e];for(t in i)if(i.hasOwnProperty(t))if('strings'==t)for(n in i.strings)i.strings.hasOwnProperty(n)&&(ce.strings[n]=ie(i.strings[n]));else ce[t]=i[t],0<=a.indexOf(t)&&Ve.push(t);ce.scene=e}for(t in o)if(o.hasOwnProperty(t))if('strings'==t)for(n in o.strings)o.strings.hasOwnProperty(n)&&(ce.strings[n]=ie(o.strings[n]));else ce[t]=o[t],0<=a.indexOf(t)&&Ve.push(t)}function X(e){if(e=!!e&&e,e&&'preview'in ce){var n=ce.preview;ce.basePath&&!s(n)&&(n=ce.basePath+n),he=t.createElement('div'),he.className='pnlm-preview-img',he.style.backgroundImage='url(\''+le(n)+'\')',ot.appendChild(he)}var o=ce.title,i=ce.author;for(var r in e&&('previewTitle'in ce&&(ce.title=ce.previewTitle),'previewAuthor'in ce&&(ce.author=ce.previewAuthor)),ce.hasOwnProperty('title')||(st.title.innerHTML=''),ce.hasOwnProperty('author')||(st.author.innerHTML=''),ce.hasOwnProperty('title')||ce.hasOwnProperty('author')||(st.container.style.display='none'),lt.load.innerHTML='<div><p>'+ce.strings.loadButtonLabel+'</p></div>',st.load.boxp.innerHTML=ce.strings.loadingLabel,ce)if(ce.hasOwnProperty(r))switch(r){case'title':st.title.innerHTML=ie(ce[r]),st.container.style.display='inline';break;case'author':var l=ie(ce[r]);if(ce.authorURL){var d=t.createElement('a');d.href=se(ce.authorURL,!0),d.target='_blank',d.innerHTML=ie(ce[r]),l=d.outerHTML}st.author.innerHTML=ce.strings.bylineLabel.replace('%s',l),st.container.style.display='inline';break;case'fallback':var c=t.createElement('a');c.href=se(ce[r],!0),c.target='_blank',c.textContent='Click here to view this panorama in an alternative viewer.';var h=t.createElement('p');h.textContent='Your browser does not support WebGL.',h.appendChild(t.createElement('br')),h.appendChild(c),st.errorMsg.innerHTML='',st.errorMsg.appendChild(h);break;case'hfov':$(+ce[r]);break;case'autoLoad':!0===ce[r]&&void 0===pe&&(st.load.box.style.display='inline',lt.load.style.display='none',a());break;case'showZoomCtrl':lt.zoom.style.display=ce[r]&&!1!=ce.showControls?'block':'none';break;case'showFullscreenCtrl':lt.fullscreen.style.display=ce[r]&&!1!=ce.showControls&&('fullscreen'in t||'mozFullScreen'in t||'webkitIsFullScreen'in t||'msFullscreenElement'in t)?'block':'none';break;case'hotSpotDebug':rt.style.display=ce[r]?'block':'none';break;case'showControls':ce[r]||(lt.orientation.style.display='none',lt.zoom.style.display='none',lt.fullscreen.style.display='none');break;case'orientationOnByDefault':ce[r]&&ae();}e&&(o?ce.title=o:delete ce.title,i?ce.author=i:delete ce.author)}function K(){if(ue&&!Be)if(!We)try{n.requestFullscreen?n.requestFullscreen():n.mozRequestFullScreen?n.mozRequestFullScreen():n.msRequestFullscreen?n.msRequestFullscreen():n.webkitRequestFullScreen()}catch(e){}else t.exitFullscreen?t.exitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.webkitCancelFullScreen?t.webkitCancelFullScreen():t.msExitFullscreen&&t.msExitFullscreen()}function _(e){t.fullscreenElement||t.fullscreen||t.mozFullScreen||t.webkitIsFullScreen||t.msFullscreenElement?(lt.fullscreen.classList.add('pnlm-fullscreen-toggle-button-active'),We=!0):(lt.fullscreen.classList.remove('pnlm-fullscreen-toggle-button-active'),We=!1),'resize'!==e&&de('fullscreenchange',We),pe.resize(),$(ce.hfov),S()}function V(){ue&&($(ce.hfov-5),S())}function J(){ue&&($(ce.hfov+5),S())}function Q(e){var t=ce.minHfov;if('multires'==ce.type&&pe&&!ce.multiResMinHfov&&(t=Ee(t,pe.getCanvas().width/(.9*(ce.multiRes.cubeResolution/90)))),t>ce.maxHfov)return console.log('HFOV bounds do not make sense (minHfov > maxHfov).'),ce.hfov;var n=ce.hfov;if(n=e<t?t:e>ce.maxHfov?ce.maxHfov:e,ce.avoidShowingBackground&&pe&&!isNaN(ce.maxPitch-ce.minPitch)){var o=pe.getCanvas();n=Ee(n,360*ke(Oe((ce.maxPitch-ce.minPitch)/360*ze)/o.height*o.width)/ze)}return n}function $(e){ce.hfov=Q(e),de('zoomchange',ce.hfov)}function ee(){Ke={},Xe=ce.autoRotate?ce.autoRotate:Xe,ce.autoRotate=!1}function te(){d(),ue=!1,lt.load.style.display='none',st.load.box.style.display='inline',a()}function ne(e,t,n,a,i){ue||(i=!0),ue=!1,Ke={};var s,r,l,d;if(ce.sceneFadeDuration&&!i){var c=pe.render(ce.pitch*ze/180,ce.yaw*ze/180,ce.hfov*ze/180,{returnImage:!0});if(void 0!==c)return s=new Image,s.className='pnlm-fade-img',s.style.transition='opacity '+ce.sceneFadeDuration/1e3+'s',s.style.width='100%',s.style.height='100%',s.onload=function(){ne(e,t,n,a,!0)},s.src=c,ot.appendChild(s),void(pe.fadeImg=s)}r='same'===t?ce.pitch:t,l='same'===n?ce.yaw:'sameAzimuth'===n?ce.yaw+(ce.northOffset||0)-(o.scenes[e].northOffset||0):n,d='same'===a?ce.hfov:a,G(),Z(e),Ge.yaw=Ge.pitch=Ge.hfov=0,X(),r!==void 0&&(ce.pitch=r),l!==void 0&&(ce.yaw=l),d!==void 0&&(ce.hfov=d),de('scenechange',e),te()}function oe(){e.removeEventListener('deviceorientation',D),lt.orientation.classList.remove('pnlm-orientation-button-active'),je=!1}function ae(){dt&&('undefined'!=typeof DeviceMotionEvent&&'function'==typeof DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(function(t){'granted'==t&&(je=1,e.addEventListener('deviceorientation',D),lt.orientation.classList.add('pnlm-orientation-button-active'))}):(je=1,e.addEventListener('deviceorientation',D),lt.orientation.classList.add('pnlm-orientation-button-active')))}function ie(e){return o.escapeHTML?(e+'').split(/&/g).join('&amp;').split('"').join('&quot;').split('\'').join('&#39;').split('<').join('&lt;').split('>').join('&gt;').split('/').join('&#x2f;').split('\n').join('<br>'):(e+'').split('\n').join('<br>')}function se(e,t){try{var n=decodeURIComponent(re(e)).replace(/[^\w:]/g,'').toLowerCase()}catch(t){return'about:blank'}return 0===n.indexOf('javascript:')||0===n.indexOf('vbscript:')?(console.log('Script URL removed.'),'about:blank'):t&&0===n.indexOf('data:')?(console.log('Data URI removed from link.'),'about:blank'):e}function re(e){return e.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,function(e,t){var o=String.fromCharCode;return t=t.toLowerCase(),'colon'===t?':':'#'===t.charAt(0)?'x'===t.charAt(1)?o(parseInt(t.substring(2),16)):o(+t.substring(1)):''})}function le(e){return se(e).replace(/"/g,'%22').replace(/'/g,'%27')}function de(e){if(e in _e)for(var t=_e[e].length;0<t;t--)_e[e][_e[e].length-t].apply(null,[].slice.call(arguments,1))}var ce,pe,he,me,ue,ye,fe,ve,ge,we,be,xe=Math.max,Pe=Math.abs,Ee=Math.min,Le=Math.atan2,ke=Math.atan,Ce=Math.sqrt,He=Math.cos,Re=Math.sin,Oe=Math.tan,ze=Math.PI,Se=this,Fe=!1,Te=Date.now(),Ae=0,Ie=0,Ne=-1,De=0,Me=0,Ye=Array(10),We=!1,Be=!1,Ue=!1,Ge={yaw:0,pitch:0,hfov:0},qe=!1,je=!1,Ze=0,Xe=0,Ke={},_e={},Ve=[],Je=!1,Qe=1e-6,$e=!1,et=!1,tt={hfov:100,minHfov:50,multiResMinHfov:!1,maxHfov:120,pitch:0,minPitch:void 0,maxPitch:void 0,yaw:0,minYaw:-180,maxYaw:180,roll:0,haov:360,vaov:180,vOffset:0,autoRotate:!1,autoRotateInactivityDelay:-1,autoRotateStopDelay:void 0,type:'equirectangular',northOffset:0,showFullscreenCtrl:!0,dynamic:!1,dynamicUpdate:!1,doubleClickZoom:!0,keyboardZoom:!0,mouseZoom:!0,showZoomCtrl:!0,autoLoad:!1,showControls:!0,orientationOnByDefault:!1,hotSpotDebug:!1,backgroundColor:[0,0,0],avoidShowingBackground:!1,animationTimingFunction:function(e){return .5>e?2*e*e:-1+(4-2*e)*e},draggable:!0,disableKeyboardCtrl:!1,crossOrigin:'anonymous',touchPanSpeedCoeffFactor:1,capturedKeyNumbers:[16,17,27,37,38,39,40,61,65,68,83,87,107,109,173,187,189],friction:.15};tt.strings={loadButtonLabel:'Click to<br>Load<br>Panorama',loadingLabel:'Loading...',bylineLabel:'by %s',noPanoramaError:'No panorama image was specified.',fileAccessError:'The file %s could not be accessed.',malformedURLError:'There is something wrong with the panorama URL.',iOS8WebGLError:'Due to iOS 8\'s broken WebGL implementation, only progressive encoded JPEGs work for your device (this panorama uses standard encoding).',genericWebGLError:'Your browser does not have the necessary WebGL support to display this panorama.',textureSizeError:'This panorama is too big for your device! It\'s %spx wide, but your device only supports images up to %spx wide. Try another device. (If you\'re the author, try scaling down the image.)',unknownError:'Unknown error. Check developer console.'},n='string'==typeof n?t.getElementById(n):n,n.classList.add('pnlm-container'),n.tabIndex=0;var nt=t.createElement('div');nt.className='pnlm-ui',n.appendChild(nt);var ot=t.createElement('div');ot.className='pnlm-render-container',n.appendChild(ot);var at=t.createElement('div');at.className='pnlm-dragfix',nt.appendChild(at);var it=t.createElement('span');it.className='pnlm-about-msg',it.innerHTML='<a href="https://pannellum.org/" target="_blank">Pannellum</a>',nt.appendChild(it),at.addEventListener('contextmenu',c);var st={},rt=t.createElement('div');rt.className='pnlm-sprite pnlm-hot-spot-debug-indicator',nt.appendChild(rt),st.container=t.createElement('div'),st.container.className='pnlm-panorama-info',st.title=t.createElement('div'),st.title.className='pnlm-title-box',st.container.appendChild(st.title),st.author=t.createElement('div'),st.author.className='pnlm-author-box',st.container.appendChild(st.author),nt.appendChild(st.container),st.load={},st.load.box=t.createElement('div'),st.load.box.className='pnlm-load-box',st.load.boxp=t.createElement('p'),st.load.box.appendChild(st.load.boxp),st.load.lbox=t.createElement('div'),st.load.lbox.className='pnlm-lbox',st.load.lbox.innerHTML='<div class="pnlm-loading"></div>',st.load.box.appendChild(st.load.lbox),st.load.lbar=t.createElement('div'),st.load.lbar.className='pnlm-lbar',st.load.lbarFill=t.createElement('div'),st.load.lbarFill.className='pnlm-lbar-fill',st.load.lbar.appendChild(st.load.lbarFill),st.load.box.appendChild(st.load.lbar),st.load.msg=t.createElement('p'),st.load.msg.className='pnlm-lmsg',st.load.box.appendChild(st.load.msg),nt.appendChild(st.load.box),st.errorMsg=t.createElement('div'),st.errorMsg.className='pnlm-error-msg pnlm-info-box',nt.appendChild(st.errorMsg);var lt={};lt.container=t.createElement('div'),lt.container.className='pnlm-controls-container',nt.appendChild(lt.container),lt.load=t.createElement('button'),lt.load.className='pnlm-load-button',lt.load.addEventListener('click',function(){X(),te()}),nt.appendChild(lt.load),lt.zoom=t.createElement('div'),lt.zoom.className='pnlm-zoom-controls pnlm-controls',lt.zoomIn=t.createElement('div'),lt.zoomIn.className='pnlm-zoom-in pnlm-sprite pnlm-control',lt.zoomIn.addEventListener('click',V),lt.zoom.appendChild(lt.zoomIn),lt.zoomOut=t.createElement('div'),lt.zoomOut.className='pnlm-zoom-out pnlm-sprite pnlm-control',lt.zoomOut.addEventListener('click',J),lt.zoom.appendChild(lt.zoomOut),lt.container.appendChild(lt.zoom),lt.fullscreen=t.createElement('div'),lt.fullscreen.addEventListener('click',K),lt.fullscreen.className='pnlm-fullscreen-toggle-button pnlm-sprite pnlm-fullscreen-toggle-button-inactive pnlm-controls pnlm-control',(t.fullscreenEnabled||t.mozFullScreenEnabled||t.webkitFullscreenEnabled||t.msFullscreenEnabled)&&lt.container.appendChild(lt.fullscreen),lt.orientation=t.createElement('div'),lt.orientation.addEventListener('click',function(){je?oe():ae()}),lt.orientation.addEventListener('mousedown',function(t){t.stopPropagation()}),lt.orientation.addEventListener('touchstart',function(t){t.stopPropagation()}),lt.orientation.addEventListener('pointerdown',function(t){t.stopPropagation()}),lt.orientation.className='pnlm-orientation-button pnlm-orientation-button-inactive pnlm-sprite pnlm-controls pnlm-control';var dt=!1;e.DeviceOrientationEvent&&'https:'==location.protocol&&0<=navigator.userAgent.toLowerCase().indexOf('mobi')&&(lt.container.appendChild(lt.orientation),dt=!0);var ct=t.createElement('div');ct.className='pnlm-compass pnlm-controls pnlm-control',nt.appendChild(ct),o.firstScene?Z(o.firstScene):o.default&&o.default.firstScene?Z(o.default.firstScene):Z(null),X(!0);var pt=[],ht=[];A.prototype.multiply=function(e){return new A(this.w*e.w-this.x*e.x-this.y*e.y-this.z*e.z,this.x*e.w+this.w*e.x+this.y*e.z-this.z*e.y,this.y*e.w+this.w*e.y+this.z*e.x-this.x*e.z,this.z*e.w+this.w*e.z+this.x*e.y-this.y*e.x)},A.prototype.toEulerAngles=function(){var e=Le(2*(this.w*this.x+this.y*this.z),1-2*(this.x*this.x+this.y*this.y)),t=Math.asin(2*(this.w*this.y-this.z*this.x)),n=Le(2*(this.w*this.z+this.x*this.y),1-2*(this.y*this.y+this.z*this.z));return[e,t,n]};this.isLoaded=function(){return!!ue},this.getPitch=function(){return ce.pitch},this.setPitch=function(e,t,n,o){return(Te=Date.now(),Pe(e-ce.pitch)<=Qe)?('function'==typeof n&&n(o),this):(t=null==t?1e3:+t,t?(Ke.pitch={startTime:Date.now(),startPosition:ce.pitch,endPosition:e,duration:t},'function'==typeof n&&setTimeout(function(){n(o)},t)):ce.pitch=e,S(),this)},this.getPitchBounds=function(){return[ce.minPitch,ce.maxPitch]},this.setPitchBounds=function(e){return ce.minPitch=xe(-90,Ee(e[0],90)),ce.maxPitch=xe(-90,Ee(e[1],90)),this},this.getYaw=function(){return(ce.yaw+540)%360-180},this.setYaw=function(e,t,n,o){return(Te=Date.now(),Pe(e-ce.yaw)<=Qe)?('function'==typeof n&&n(o),this):(t=null==t?1e3:+t,e=(e+180)%360-180,t?(180<ce.yaw-e?e+=360:180<e-ce.yaw&&(e-=360),Ke.yaw={startTime:Date.now(),startPosition:ce.yaw,endPosition:e,duration:t},'function'==typeof n&&setTimeout(function(){n(o)},t)):ce.yaw=e,S(),this)},this.getYawBounds=function(){return[ce.minYaw,ce.maxYaw]},this.setYawBounds=function(e){return ce.minYaw=xe(-360,Ee(e[0],360)),ce.maxYaw=xe(-360,Ee(e[1],360)),this},this.getHfov=function(){return ce.hfov},this.setHfov=function(e,t,n,o){return(Te=Date.now(),Pe(e-ce.hfov)<=Qe)?('function'==typeof n&&n(o),this):(t=null==t?1e3:+t,t?(Ke.hfov={startTime:Date.now(),startPosition:ce.hfov,endPosition:Q(e),duration:t},'function'==typeof n&&setTimeout(function(){n(o)},t)):$(e),S(),this)},this.getHfovBounds=function(){return[ce.minHfov,ce.maxHfov]},this.setHfovBounds=function(e){return ce.minHfov=xe(0,e[0]),ce.maxHfov=xe(0,e[1]),this},this.lookAt=function(e,t,n,o,a,i){return o=null==o?1e3:+o,void 0!==e&&Pe(e-ce.pitch)>Qe&&(this.setPitch(e,o,a,i),a=void 0),void 0!==t&&Pe(t-ce.yaw)>Qe&&(this.setYaw(t,o,a,i),a=void 0),void 0!==n&&Pe(n-ce.hfov)>Qe&&(this.setHfov(n,o,a,i),a=void 0),'function'==typeof a&&a(i),this},this.getNorthOffset=function(){return ce.northOffset},this.setNorthOffset=function(e){return ce.northOffset=Ee(360,xe(0,e)),S(),this},this.getHorizonRoll=function(){return ce.horizonRoll},this.setHorizonRoll=function(e){return ce.horizonRoll=Ee(90,xe(-90,e)),pe.setPose(ce.horizonPitch*ze/180,ce.horizonRoll*ze/180),S(),this},this.getHorizonPitch=function(){return ce.horizonPitch},this.setHorizonPitch=function(e){return ce.horizonPitch=Ee(90,xe(-90,e)),pe.setPose(ce.horizonPitch*ze/180,ce.horizonRoll*ze/180),S(),this},this.startAutoRotate=function(e,t,n){return e=e||Xe||1,t=void 0===t?we:t,n=void 0===n?ge:n,ce.autoRotate=e,Se.lookAt(t,void 0,n,3e3),S(),this},this.stopAutoRotate=function(){return Xe=ce.autoRotate?ce.autoRotate:Xe,ce.autoRotate=!1,ce.autoRotateInactivityDelay=-1,this},this.stopMovement=function(){ee(),Ge={yaw:0,pitch:0,hfov:0}},this.getRenderer=function(){return pe},this.setUpdate=function(e){return Je=!0===e,void 0===pe?r():S(),this},this.mouseEventToCoords=function(e){return u(e)},this.loadScene=function(e,t,n,o){return!1!==ue&&ne(e,t,n,o),this},this.getScene=function(){return ce.scene},this.addScene=function(e,t){return o.scenes[e]=t,this},this.removeScene=function(e){return!!(ce.scene!==e&&o.scenes.hasOwnProperty(e))&&(delete o.scenes[e],!0)},this.toggleFullscreen=function(){return K(),this},this.getConfig=function(){return ce},this.getContainer=function(){return n},this.addHotSpot=function(e,t){if(void 0===t&&void 0===ce.scene)ce.hotSpots.push(e);else{var n=void 0===t?ce.scene:t;if(o.scenes.hasOwnProperty(n))o.scenes[n].hasOwnProperty('hotSpots')||(o.scenes[n].hotSpots=[],n==ce.scene&&(ce.hotSpots=o.scenes[n].hotSpots)),o.scenes[n].hotSpots.push(e);else throw'Invalid scene ID!'}return(void 0===t||ce.scene==t)&&(W(e),ue&&q(e)),this},this.removeHotSpot=function(e,t){if(t===void 0||ce.scene==t){if(!ce.hotSpots)return!1;for(var n=0;n<ce.hotSpots.length;n++)if(ce.hotSpots[n].hasOwnProperty('id')&&ce.hotSpots[n].id===e){for(var a=ce.hotSpots[n].div;a.parentNode!=ot;)a=a.parentNode;return ot.removeChild(a),delete ce.hotSpots[n].div,ce.hotSpots.splice(n,1),!0}}else if(o.scenes.hasOwnProperty(t)){if(!o.scenes[t].hasOwnProperty('hotSpots'))return!1;for(var s=0;s<o.scenes[t].hotSpots.length;s++)if(o.scenes[t].hotSpots[s].hasOwnProperty('id')&&o.scenes[t].hotSpots[s].id===e)return o.scenes[t].hotSpots.splice(s,1),!0}else return!1},this.resize=function(){pe&&z()},this.isLoaded=function(){return ue},this.isOrientationSupported=function(){return dt||!1},this.stopOrientation=function(){oe()},this.startOrientation=function(){ae()},this.isOrientationActive=function(){return!!je},this.on=function(e,t){return _e[e]=_e[e]||[],_e[e].push(t),this},this.off=function(e,t){if(!e)return _e={},this;if(t){var n=_e[e].indexOf(t);0<=n&&_e[e].splice(n,1),0==_e[e].length&&delete _e[e]}else delete _e[e];return this},this.destroy=function(){et=!0,clearTimeout(ve),pe&&pe.destroy(),Ue&&(t.removeEventListener('mousemove',y,!1),t.removeEventListener('mouseup',f,!1),n.removeEventListener('mozfullscreenchange',_,!1),n.removeEventListener('webkitfullscreenchange',_,!1),n.removeEventListener('msfullscreenchange',_,!1),n.removeEventListener('fullscreenchange',_,!1),be?be.disconnect():(e.removeEventListener('resize',z,!1),e.removeEventListener('orientationchange',z,!1)),n.removeEventListener('keydown',L,!1),n.removeEventListener('keyup',C,!1),n.removeEventListener('blur',k,!1),t.removeEventListener('mouseleave',f,!1)),n.innerHTML='',n.classList.remove('pnlm-container')}}return{viewer:function(e,t){return new n(e,t)}}}(window,document);